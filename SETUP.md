# 環境構築ガイド (SETUP.md)

このドキュメントは、人間とAI（Gemini）が協調してローカル開発環境を構築するための手順書です。

## 🎯 13のゴール（目指す状態）
1. Git Bash が使える（Windowsの場合）
2. Node.js（最新のLTSバージョン以上）
3. gh コマンドが使える（認証済）
4. git コマンドが使える（gh認証と連携済）
5. Dockerデーモンが起動し、応答する
6. gcloud CLI が使える（ADC認証済）
7. Terraform が使える
8. tflint が使える
9. markdownlint-cli が使える
10. VSCode がインストールされている
11. VSCode の推奨拡張機能が導入されている
12. Gemini CLI が使える（認証済）
13. Gemini MCP（Google Developer・Terraform等）が稼働する

---

## Phase 1: 初期セットアップ（Web版Geminiを使用）

以下のプロンプトをコピーしてWeb版Geminiに貼り付けてください。

#### **【Web版Geminiへの入力プロンプト】**

```markdown
# 厳守事項（同期実行・ノイズ排除ルール）
あなたは「一問一答形式」の環境構築ガイドです。以下のルールを1文字たりとも違えず守ってください。

1. **ノイズの完全排除**: 「Gemini アプリ アクティビティ」に関する言及、および履歴設定などのWeb版独自の仕様は、今回のCLIセットアップには一切関係ありません。これらの文言は絶対に出力しないでください。
2. **シングルタスク**: 1つの返信につき、要求するアクションは「1つだけ」です。「あわせてこれも実行してください」といったまとめ要求は禁止です。
3. **先読み禁止**: 現在のステップが完了するまで、次のステップの手順や概念を一切口にしないでください。
4. **捏造禁止**: `gemini login` は存在しません。認証は引数なしの `gemini` を実行し、メニュー選択する仕様を案内すること。

# 1. ターゲットバージョンの特定（検索必須）
まず、以下のツールの「2026年現在の最新安定版」を自ら検索・特定してください。
- **Node.js**: 最新のLTS（長期サポート）バージョン
- **Git for Windows**: 最新の Stable リリース
- **GitHub CLI (gh)**: 最新の Stable リリース
- **Gemini CLI (@google/gemini-cli)**: 最新バージョン

# 2. 認証仕様（公式基準）
- **個人のGoogleアカウント**: Googleでログイン / `GOOGLE_CLOUD_PROJECT` 設定不要。
- **組織（Workspace等）ユーザー**: Googleでログイン / `GOOGLE_CLOUD_PROJECT` が必須。`~/.gemini/.env` に記述。
- **AI Studio ユーザー**: Gemini APIキーを使用 / プロジェクト設定不要。
- **Vertex AI ユーザー**: Vertex AI / Project と Location の両方が必須。

# 3. 認証と疎通確認の仕様
1. 引数なしの `gemini` で認証メニューを通る。
2. 完了後、そのまま始まる対話モードで「おはよう」と入力して動作確認する。
3. 成功後、シェルに戻るための終了手順を案内する。
   - `/quit` と入力する
   - または、`Ctrl+C` を 2回 入力する

# 4. セットアップ順序
1. 検索による「各ツールの最新安定バージョン」の特定と提示（ここで一旦停止）。
2. `node -v`, `git --version`, `gh --version`, `gemini --version` の確認と判定。
3. `gh auth status` によるGitHub認証の確認と案内。
4. 未導入・要更新ツール（Gemini CLI含む）のインストール/アップデート案内。
5. ユーザータイプの質問と、タイプに応じた認証・環境設定の案内。
6. 対話モードでの疎通確認（「おはよう」）と、終了手順の案内。

# 最初のタスク
あなたが特定した「最新安定バージョンの数値」を提示し、私に「`node -v`, `git --version`, `gh --version`, `gemini --version` を実行して報告してください」とだけ伝えてください。
提示後、私の返答を待たずに次の確認（GitHub認証など）を求めないでください。ここで一旦止まってください。
```

---

## Phase 2: 環境の完成（Gemini CLIを使用）

Gemini CLIが動くようになったら、以下を実行します。

```bash
# シェルに戻った状態で実行
gemini "SETUP.md と versions.json を読み、13のゴールを確認してください。その上で check_env.sh を実行し、未完了の項目があれば解決策を1つずつ提示してください。"
```